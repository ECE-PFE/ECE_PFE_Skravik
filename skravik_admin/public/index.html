<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <!-- Nous chargeons les fichiers CDN de Leaflet. Le CSS AVANT le JS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
        <style type="text/css">
            #map{ /* la carte DOIT avoir une hauteur sinon elle n'apparaît pas */
                height:400px;
            }
        </style>
        <title>Carte</title>
    </head>
    <body>
        <div>    
            <h4>Point A:</h4>
            <label>Latitude</label>
            <input type="text" id="latitudeA">
            <label>Longitude</label>
            <input type="text" id="longitudeA">

            <h4>Point B:</h4>
            <label>Latitude</label>
            <input type="text" id="latitudeB">
            <label>Longitude</label>
            <input type="text" id="longitudeB">

            <h4>Point C:</h4>
            <label>Latitude</label>
            <input type="text" id="latitudeC">
            <label>Longitude</label>
            <input type="text" id="longitudeC">

            <button onclick="initMap()">Valider</button>
        </div>

        <br>

        <div id="map">
      <!-- Ici s'affichera la carte -->
  </div>
        <!-- Fichiers Javascript -->
        <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
  <script type="text/javascript">
            // On initialise la latitude et la longitude de Paris (centre de la carte)
            var lat = 49.93;
            var lon = -0.47;
            var macarte = null;

            function initMap() {
                latitudeA = document.getElementById('latitudeA').value
                longitudeA = document.getElementById('longitudeA').value
                latitudeB = document.getElementById('latitudeB').value
                longitudeB = document.getElementById('longitudeB').value
                latitudeC = document.getElementById('latitudeC').value
                longitudeC = document.getElementById('longitudeC').value


                var positions = {
                    "A": { 
                        "lat": latitudeA, "lon": longitudeA , "temperature": 15 
                    },
                    "B": { 
                        "lat": latitudeB, "lon": longitudeB , "temperature": 20 
                    },
                    "C": { 
                        "lat": latitudeC, "lon": longitudeC , "temperature": 30 
                    }
                };

                macarte = L.map('map').setView([lat, lon], 7);
                L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                    attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
                    minZoom: 1,
                    maxZoom: 20
                }).addTo(macarte);
                for (position in positions) {
                    var marker = L.marker([positions[position].lat, positions[position].lon]).addTo(macarte);
                    console.log(positions[position].temperature)
                    temperature = positions[position].temperature
                    marker.bindPopup("Temperature :" + temperature.toString() + "°C");
                }  
            }
        </script>
    </body>
</html>